{"openapi":"3.0.1","info":{"title":"EU Digital COVID Certificate Validation Service","description":"The API provides functionalities for validating  EU digital COVID certificates.","license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"},"version":"refs/heads/main"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/initialize/{subject}":{"put":{"tags":["validation-controller"],"summary":"validation initialization","description":"The validation initialization endpoint delivers to a subject and a public key, an initialization\ninformation to indicate to which audience the DCC has to be delivered and when this audience\nexpires. Within this lifetime the validation is able to receive and validate a DCC for this subject","operationId":"initValidation","parameters":[{"name":"subject","in":"path","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Version","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Crypto-Enc","in":"header","required":false,"schema":{"type":"boolean"}},{"name":"X-Crypto-Sig","in":"header","required":false,"schema":{"type":"boolean"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationInitRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationInitResponse"}}}},"401":{"description":"Unauthorized.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationInitResponse"}}}},"201":{"description":"Subject created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationInitResponse"}}}}}}},"/validate/{subject}":{"post":{"tags":["dcc-provisioning-controller"],"summary":"The provision endpoint is the public endpoint where DCCs can be provided for a subject. The endpoint receives the encrypted DCC, validates it and creates the result for the subject.","description":"The provision endpoint is the public endpoint where DCCs can be provided for a subject. The endpoint receives the encrypted DCC, validates it and creates the result for the subject.","operationId":"validateDcc","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"subject","in":"path","required":true,"schema":{"type":"string"}},{"name":"X-Version","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DccValidationRequest"}}},"required":true},"responses":{"400":{"description":"Bad Request, content of the provide data is malformed","content":{"application/jwt":{"schema":{"type":"string"}}}},"422":{"description":"Unprocessable Entity. Wrong Signature of the Subject, Wrong Encryption or any other problem with the encoding","content":{"application/jwt":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized, if no access token are provided","content":{"application/jwt":{"schema":{"type":"string"}}}},"200":{"description":"OK","content":{"application/jwt":{"schema":{"type":"string"}}}},"410":{"description":"Gone, Subject does not exists any more","content":{"application/jwt":{"schema":{"type":"string"}}}}}}},"/status/{subject}":{"get":{"tags":["validation-controller"],"summary":"The validation status endpoint provides the validation result of a subject","description":"The validation status endpoint provides the validation result of a subject. This endpoint is just reachable over a private connection of the service backend","operationId":"checkValidationStatus","parameters":[{"name":"subject","in":"path","required":true,"schema":{"type":"string"}},{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Version","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"Unauthorized","content":{"application/jwt":{"schema":{"type":"string"}}}},"204":{"description":"No content, wait for status","content":{"application/jwt":{"schema":{"type":"string"}}}},"410":{"description":"Gone. Subject does not exist anymore (TTL expired).","content":{"application/jwt":{"schema":{"type":"string"}}}},"200":{"description":"OK","content":{"application/jwt":{"schema":{"type":"string"}}}}}}},"/identity":{"get":{"tags":["identity-controller"],"summary":"The identity endpoint provides the validation service identity document which contains the usedencryption schemas and the associated keys/verification methods.","description":"The identity document is downloaded by the wallet apps to encrypt the DCC with the rightcrypto material.","operationId":"identity","parameters":[{"name":"element","in":"path","required":true,"schema":{"type":"string"}},{"name":"type","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentityResponse"}}}}}}},"/identity/{element}":{"get":{"tags":["identity-controller"],"summary":"The identity endpoint provides the validation service identity document which contains the usedencryption schemas and the associated keys/verification methods.","description":"The identity document is downloaded by the wallet apps to encrypt the DCC with the rightcrypto material.","operationId":"identity_1","parameters":[{"name":"element","in":"path","required":true,"schema":{"type":"string"}},{"name":"type","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentityResponse"}}}}}}},"/identity/{element}/{type}":{"get":{"tags":["identity-controller"],"summary":"The identity endpoint provides the validation service identity document which contains the usedencryption schemas and the associated keys/verification methods.","description":"The identity document is downloaded by the wallet apps to encrypt the DCC with the rightcrypto material.","operationId":"identity_2","parameters":[{"name":"element","in":"path","required":true,"schema":{"type":"string"}},{"name":"type","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdentityResponse"}}}}}}}},"components":{"schemas":{"ValidationInitRequest":{"required":["keyType","nonce","pubKey"],"type":"object","properties":{"pubKey":{"type":"string"},"keyType":{"type":"string"},"callback":{"type":"string"},"nonce":{"type":"string"}}},"PublicKeyJwk":{"type":"object","properties":{"x5c":{"type":"array","items":{"type":"string"}},"kid":{"type":"string"},"alg":{"type":"string"},"use":{"type":"string"}}},"ValidationInitResponse":{"required":["aud","subject"],"type":"object","properties":{"subject":{"type":"string"},"exp":{"type":"integer","format":"int64"},"aud":{"type":"string"},"encKey":{"$ref":"#/components/schemas/PublicKeyJwk"},"sigKey":{"$ref":"#/components/schemas/PublicKeyJwk"}}},"DccValidationRequest":{"type":"object","properties":{"kid":{"type":"string"},"dcc":{"type":"string"},"sig":{"type":"string"},"sigAlg":{"type":"string"},"encScheme":{"type":"string"},"encKey":{"type":"string"}}},"IdentityResponse":{"type":"object","properties":{"id":{"type":"string"},"verificationMethod":{"type":"array","items":{"$ref":"#/components/schemas/VerificationMethod"}}}},"VerificationMethod":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"controller":{"type":"string"},"publicKeyJwk":{"$ref":"#/components/schemas/PublicKeyJwk"},"verificationMethods":{"type":"array","items":{"type":"string"}}}}}}}